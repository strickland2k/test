<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Cypress PR Reports</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <style>
        nav#backButton {
            position: absolute;
            bottom: 10px;
            left: 20px; 
        }
    </style>
</head>
<body>
    <header>
        <p>1</p>

        <nav id="backButton">
            <a class="cta-button" href="index.html">Home</a>
        </nav>
    </header>
    <main>
        <h2>PR Reports</h2>
        <p><nav id="dynamicNav">
        </nav></p>
    </main>
    <footer>
        <p>&copy; Cypress Reports </p>
    </footer>
    <script>
                // JavaScript code to dynamically generate navigation links
                document.addEventListener("DOMContentLoaded", function () {
            var dynamicNav = document.getElementById("dynamicNav");
            // Base directory where your HTML pages are located
            var baseDirectory = "pr/"; // Updated base directory

            // Function to recursively find index.html files and generate links
            function findIndexHTMLFiles(directory) {
                var files = [];

                // List all files in the directory (assuming your web server supports this)
                var dirList = [
                    "branch-PR1/index.html",
                    "branch-PR2/index.html",
                    "branch-PR3/index.html"
                    // Add more as needed
                ];

                dirList.forEach(function (file) {
                    // Check if the file is in the format "branch-(BRANCH NAME)/index.html"
                    if (file.match(/^branch-.+\/index\.html$/)) {
                        var link = document.createElement("a");
                        link.href = baseDirectory + file;
                        link.textContent = "Report for " + file;
                        files.push(link);
                        console.log("Generated Link:", link.href); // Log the generated link
                    }
                });

                return files;
            }

            // Generate the report links by calling the function
            var reportLinks = findIndexHTMLFiles(baseDirectory);

            // Append the generated links to the dynamicNav element
            reportLinks.forEach(function (link, index) {
                dynamicNav.appendChild(link);

                // Add a horizontal line (<hr>) between report links except for the last one
                if (index < reportLinks.length - 1) {
                    var separator = document.createElement("hr");
                    dynamicNav.appendChild(separator);
                }
            });
        });
    </script>
</body>
</html>
